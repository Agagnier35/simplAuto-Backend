type Query {
  feed: [Post!]!
  drafts: [Post!]!
  post(id: ID!): Post
  me: User
}

type Mutation {
  signup(
    email: String!
    firstName: String!
    lastName: String!
    password: String!
    location: String!
    age: Int!
    gender: Gender!
  ): User!
  login(email: String!, password: String!): User!
  createDraft(title: String!, content: String!): Post!
  publish(id: ID!): Post!
  deletePost(id: ID!): Post!
}

type Subscription {
  feedSubscription: Post
}

type Post {
  id: ID!
  published: Boolean!
  title: String!
  content: String!
  author: User!
}

type User {
  id: ID!
  email: String!
  firstName: String!
  lastName: String!
  password: String!
  location: String!
  age: Int!
  gender: Gender!
  permissions: [Permission!]!
  offers: [Offer!]!
  ads: [Ad!]!
  cars: [Car!]!
}

enum Gender {
  MALE
  FEMALE
  OTHER
}

enum Permission {
  USER
  PREMIUM
  ADMIN
}

type Ad {
  id: ID!
  creator: User!
  offers: [Offer!]!
  features: [AdFeature!]!
  priceLowerBound: Float!
  priceHigherBound: Float!
  isUrgent: Boolean!
  isFirst: Boolean!
  status: AdStatus!
}

enum AdStatus {
  PUBLISHED
  ACCEPTED
  DELETED
}

type AdFeature {
  id: ID!
  feature: CarFeature!
  importance: AdFeatureImportance!
}

enum AdFeatureImportance {
  LOW
  MEDIUM
  HIGH
}

type Offer {
  id: ID!
  creator: User!
  ad: Ad!
  car: Car!
  price: Float!
  status: OfferStatus!
  finalRank: Int
}

enum OfferStatus {
  PUBLISHED
  ACCEPTED
  DELETED
}

type Car {
  id: ID!
  owner: User!
  manufacturer: Manufacturer!
  model: CarModel!
  category: CarCategory!
  year: Int!
  mileage: Int!
  photos: [String!]!
  features: [CarFeature!]!
}

type CarCategory {
  id: ID!
  name: String!
}

type CarFeatureCategory {
  id: ID!
  name: String!
  features: [CarFeature!]!
}

type CarFeature {
  id: ID!
  name: String!
  category: CarFeatureCategory!
}

type Manufacturer {
  id: ID!
  name: String!
  models: [CarModel!]!
}

type CarModel {
  id: ID!
  name: String!
}
